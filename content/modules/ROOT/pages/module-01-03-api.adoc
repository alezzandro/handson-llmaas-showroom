:imagesdir: ../assets/images

[#api-gateway]
= AI at Scale with an API Gateway

Now, in this next step, you’re still acting as a platform engineer - but your focus now shifts from deploying a model to making it safely consumable across your organization.

Exposing models directly is risky without controls. You’ll now add a governance layer using an **API gateway**, so other teams can use the model securely, reliably, and at scale—without direct access to the underlying cluster or GPUs.

We'll use 3scale API Management to:

* Secure access to your model
* Monitor usage
* Enable future scaling and quotas.

In production deployments, you may simply replace 3scale with **your enterprise API Gateway of choice** while following the same architectural patterns.

== Step 1: Explore the 3Scale Admin Portal

Now we are going to take a look to the 3Scale API Admin portal that we configured for you. Because this is a shared environment you will just get access to the Developer view, as documented in the next section.

Here is where platform engineers:

* Create API products
* Define backend services
* Control rate limits and access policies
* Monitor traffic and user activity

+
[.bordershadow]
image::01/03-3scale-admin-dashboard.png[width="100%"]

In the dropdown menu at the top you could explore these sections:

[.bordershadow]
image::01/03-3scale-section-menu.png[width="100%"]

* **Audience**: this gives you information about the users, registrations, etc.
* **Products**: this is where you can create the Products that people will have access to. You can see there are four products already created:
- `stable_diffusion`                       
- `docling`
- `granite_8b_code_instruct`
- `granite_3_3_8b_instruct`
* **Backends**: this is where you can see the backends that can be used by your products. You can see that the `granite_3_3_8b_instruct` backend that is used by the `granite_3_3_8b_instruct` product and so on. The `backend` in this case is simply the model `Internal Endpoint` that we looked at in the earlier section. 

For now, note the two key items:

* A product named `granite_3_3_8b_instruct` (mapped to Granite 3.3 8b model)
* A backend service with the same name powering that product


== Step 2: Log in to the Developer Portal

// Add role shifting phrasing

Visit the portal at: https://maas.{openshift_cluster_ingress_domain}[https://maas.{openshift_cluster_ingress_domain},window=_blank].

Signing in:

1. Click on the `Sign In` button in the top right corner of the screen
+
[.bordershadow]
image::01/03-3scale-signin-button.png[width="100%"]
+
You will log in using the following credentials:

* Your username: `{user}`
* Your password: `openshift`
+

2.  Change the toggle `Private login` and enter your credentials.
+
[.bordershadow]
image::01/03-3scale-signin.png[width="100%"]
+
Once logged in, you will see the following UI:
+
[.bordershadow]
image::01/03-3scale-developer-loggedin.png[width="100%"]

== Step 3: Create an Application and Get an API Key

As a developer, you will need to register an application to get credentials for API access. 

Let's do that now:

1. Click on the `Create an Application` link on the front page.
+
[.bordershadow]
image::01/03-3scale-see-applications.png[width="100%"]

2. You will be taken to the `Apps and API Keys` section. We will be creating a new application. Start by clicking on the `Create new application` button.
+
[.bordershadow]
image::01/03-3scale-create-application.png[width="100%"]

3. Select the Service you want to use. In this case, we will use the `granite_3_3_8b_instruct` service that has been pre-deployed.
+
[.bordershadow]
image::01/03-3scale-select-service.png[width="100%"]

4. Give a name to your application, for example `Granite instruct application`. Click on `Create Application`.
+
[.bordershadow]
image::01/03-3scale-application-name.png[width="100%"]

5. Your application has been created. You can see the Endpoint URL you can use to connect to the API, the name of the model you must use in your requests, and the API key that has been generated for you.

+
[.bordershadow]
image::01/03-3scale-key-generated.png[width="100%"]

NOTE: Copy and save the **Endpoint URL**, **Model Name** and **API Key** information separately in your preferred notes app - you will use it in the next module to make real requests to your model.

== Recap: What you just did

You've continued walking in the shoes of our platform engineer and:

* Known more about a production-grade API gateway
* Shifted to a developer's perspective and created a client application to securely retrieve an API key.

That API key gives your model its first real consumer. A crucial step in turning infrastructure into a "service". 
