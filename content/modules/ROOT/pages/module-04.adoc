= Connect App to LLM as a Service Model

In this module, we will learn how to connect an application to a large language model (LLM) as a service. We will explore the steps required to set up the connection and how to interact with the LLM. The application we will be using is AnythingLLM, which is a powerful tool for working with LLMs.

[#connection]
== Creating a Connection

To ease the process of creating our application, we will use a custom connection type that has already been created in OpenShift AI.

This connection type is called "Anything LLM" and is specifically designed to work with the AnythingLLM application.

* In the OpenShift AI dashboard, navigate to the `Connections` section and click on `Add connection`.
+
[.bordershadow]
image::04/04-add-connection.png[]

* In the `Add connection` dialog, select the `Anything LLM` connection type from the list of available connection types.
+
[.bordershadow]
image::04/04-select-anytingllm.png[]

* Fill in the required fields for the connection, including the connection name and any other necessary parameters. At this point you can choose to connect to the Granite or the Tinyllama model. Use the information you get from the 3Scale developer portal to fill in the required fields.
** Connection name: `Granite` or `Tinyllama`
** LLM Provider Type: `generic-openai` (don't change this default value)
** Base URL: enter the Endpoint URL from 3Scale, adding `/v1` at the end (OpenAI API standard). For example: `https://granite-3dot2-8b-instruct-maas-apicast-production.apps.cluster-br294.br294.sandbox5291.opentlc.com:443/v1`
** API Key: enter the API key from 3Scale
** Chat Model Name: enter the model name from 3Scale, for example: `granite` or `tinyllama/tinyllama-1.1b-chat-v1.0`
** Leave all other fields as default.
** Click `Create` to create the connection.
+
[.bordershadow]
image::04/04-create-connection.png[]

This connection is now ready to be attached to a Workbench to inject those values as environment variables and configure AnythingLLM.

[#anything-llm]
== Connection with AnythingLLM

We will create a new Workbench based on a custom image and attach the connection we just created.

* In the OpenShift AI dashboard, navigate to the `Workbenches` section and click on `Create Workbench`.
+
[.bordershadow]
image::04/04-create-workbench.png[]

* In the `Create Workbench` form, give a name your workbench and select the `Custom Image: AnythingLLM 1.7.5` image from the list of available images.
+
[.bordershadow]
image::04/04-anythingllm-wb-1.png[]

* Leave the default values for the other fields up to the Connection section. Here click on `Attach existing connection` and select the connection you created in the previous step.
+
[.bordershadow]
image::04/04-attach-connection.png[]

* Click on `Create workbench`.
+
[.bordershadow]
image::04/04-anythingllm-wb-2.png[]

* Once the workbench is started, click on `Open` to access the AnythingLLM environment.
+
[.bordershadow]
image::04/04-open-anythingllm.png[]

* In the AnythingLLM, click on `New Workspace` to create a new workspace.
+
[.bordershadow]
image::04/04-new-workspace.png[]

* Give the workspace a name and click on `Save`. You can now chat with your model!

[#analytics]
== Analytics

In this section, we will explore the analytics capabilities of the 3Scale API Gateway. We will learn how to monitor the usage of our models.
